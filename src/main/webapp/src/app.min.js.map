{"version":3,"sources":["app.min.js"],"names":["angular","module","factory","$window","set","key","value","localStorage","get","setObject","JSON","stringify","getObject","parse","config","$stateProvider","$urlRouterProvider","state","url","templateUrl","controller","otherwise","service","$http","$q","getData","data","deferred","defer","method","params","then","answer","status","resolve","error","reject","promise","constant","name","color","$scope","colorMap","visService","$interval","$filter","types","map","item","push","selectedType","currentTime","viewTime","Date","valueOf","timeRange","show","close","records","AMap","Map","mapStyle","zoom","center","setFeatures","AMapUI","load","PointSimplifier","utils","$","MyCanvasRender","pointSimplifierIns","opts","__super__","constructor","apply","this","arguments","supportCanvas","alert","inherit","Render","Canvas","extend","prototype","renderNormalPoints","activePoints","shadowPoints","call","pointStyle","getOption","getPointsGroupKey","pointStyleGroup","getPointSimplifierInstance","groups","i","len","length","point","dataIndex","idx","dataItem","getDataItemByIndex","k","styleOptions","drawPointsWithStyleOptions","getPosition","parseFloat","lng","lat","getHoverTitle","content","autoSetFitView","renderConstructor","renderOptions","width","height","fillStyle","hoverTitleStyle","position","type","g0","g1","g2","g3","g4","g5","g6","g7","g8","g9","g10","g11","g12","on","e","record","console","log","recitime","legendType","echarts","init","document","getElementById","legendPhone","areaStack","areas","stime","etime","setData","maps","setOption","grid","left","right","top","bottom","containLabel","xAxis","yAxis","boundaryGap","axisLabel","textStyle","d","series","barMaxWidth","itemStyle","normal","label","bars","tooltip","trigger","formatter","radius","phone","emphasis","shadowBlur","shadowOffsetX","shadowColor","axisPointer","animation","dataZoom","realtime","start","end","nameLocation","axisLine","lineStyle","axisTick","areaStyle","symbolSize","num","componentType","seriesType","para","startTime","endTime","indexOf","dataType","time","substring","getTime","area","intervalEvent","parseInt","shift","flag","stop","cancel","months","currentMonth","data0","index","data1","data2","directive","restrict","scope","template","link","element","chart","find","style","title","text","fontSize","backgroundColor","legend","obj","onZero","splitLine","splitArea","stack","opacity","smooth","smoothMonotone","showSymbol","hoverAnimation","interval","barWidth","pieData","second","x","selectedMode","labelLine","first"],"mappings":"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","file":"app.min.js","sourcesContent":["angular.module('chinavis', ['ngAnimate', 'ui.router'])\r\n    .factory('localStorage', ['$window', function ($window) {\r\n        return {\r\n            // 存储单个属性\r\n            set: function (key, value) {\r\n                $window.localStorage[key] = value;\r\n            },\r\n            // 读取单个属性\r\n            get: function (key) {\r\n                return $window.localStorage[key] || '';\r\n            },\r\n            // 存储对象，以JSON格式存储\r\n            setObject: function (key, value) {\r\n                $window.localStorage[key] = JSON.stringify(value);\r\n            },\r\n            // 读取对象\r\n            getObject: function (key) {\r\n                return JSON.parse($window.localStorage[key] || '{}');\r\n            }\r\n        }\r\n    }])\r\n    .config([\"$stateProvider\", \"$urlRouterProvider\", function ($stateProvider, $urlRouterProvider) {\r\n        $stateProvider\r\n            .state('situation', {\r\n                url: '/',\r\n                templateUrl: './Situation/situation.html',\r\n                controller: 'situationController'\r\n            })\r\n            .state('analysis', {\r\n                url: '/analysis',\r\n                templateUrl: './Analysis/analysis.html',\r\n                controller: 'analysisController'\r\n            });\r\n        $urlRouterProvider.otherwise('/');\r\n    }]);\nangular.module('chinavis')\r\n    .service('visService', ['$http', '$q', function ($http, $q) {\r\n        return {\r\n            getData: function (url, data) {\r\n                var deferred = $q.defer();\r\n                var promise = $http({\r\n                    method: 'GET',\r\n                    url: url,\r\n                    params: data\r\n                });\r\n                promise.then(\r\n                    // 通讯成功的处理\r\n                    function (answer) {\r\n                        // 在这里可以对返回的数据集做一定的处理,再交由controller进行处理\r\n                        answer.status = true;\r\n                        deferred.resolve(answer.data);\r\n                    },\r\n                    // 通讯失败的处理\r\n                    function (error) {\r\n                        // 可以先对失败的数据集做处理，再交由controller进行处理\r\n                        error.status = false;\r\n                        deferred.reject(error);\r\n                    });\r\n                // 返回promise对象，交由controller继续处理成功、失败的业务回调\r\n                return deferred.promise;\r\n            }\r\n        }\r\n    }]);\nangular.module('chinavis')\r\n    .constant('colorMap', [\r\n        {\r\n            name: '小姐上门',\r\n            color: '#17becf'\r\n        },\r\n        {\r\n            name: '代开发票',\r\n            color: '#1f77b4'\r\n        },\r\n        {\r\n            name: '赌博麻将',\r\n            color: '#ff7f0e'\r\n        },\r\n        {\r\n            name: '办证刻章',\r\n            color: '#2ca02c'\r\n        },\r\n        {\r\n            name: '银行诈骗',\r\n            color: '#d62728'\r\n        },\r\n        {\r\n            name: '苹果诈骗',\r\n            color: '#9467bd'\r\n        },\r\n        {\r\n            name: '房地产广告',\r\n            color: '#8c564b'\r\n        },\r\n        {\r\n            name: '贷款服务',\r\n            color: '#e377c2'\r\n        },\r\n        {\r\n            name: '各类广告',\r\n            color: '#bcbd22'\r\n        },\r\n        {\r\n            name: '招聘信息',\r\n            color: '#17becf'\r\n        },\r\n        {\r\n            name: '诽谤谣言',\r\n            color: '#5878cf'\r\n        },\r\n        {\r\n            name: '中国移动',\r\n            color: '#74b0a1'\r\n        },\r\n        {\r\n            name: '收驾驶证',\r\n            color: '#b09355'\r\n        }\r\n    ]);\nangular.module('chinavis')\r\n    .controller('situationController', ['$scope', 'localStorage', 'colorMap', 'visService', '$interval', '$filter', function ($scope, localStorage, colorMap, visService, $interval, $filter) {\r\n        $scope.colorMap = colorMap;// 分类及对应颜色\r\n\r\n        $scope.types = ['所有分类'];// 所有分类\r\n        $scope.colorMap.map(function (item) {\r\n            $scope.types.push(item.name);\r\n        });\r\n        $scope.selectedType = $scope.types[0];// 当前所选分类\r\n\r\n        $scope.currentTime = '2017-02-24 00:00:00';// 当前时间\r\n        $scope.viewTime = new Date($scope.currentTime).valueOf() - 1800000;// 回退时间\r\n        localStorage.set('startTime', (new Date($scope.currentTime).valueOf()) / 1000);// 转化为时间戳存储在localStorage\r\n        $scope.timeRange = '';\r\n\r\n        $scope.show = false;// 是否显示短信内容\r\n        $scope.close = function () {\r\n            $scope.show = false;\r\n        };// 关闭短信内容\r\n        $scope.records = [];// 短信内容\r\n\r\n        // 创建地图\r\n        var map = new AMap.Map('container', {\r\n            mapStyle: 'amap://styles/grey',\r\n            zoom: 11,\r\n            center: [116.366576, 39.921797]\r\n        });\r\n\r\n        map.setFeatures(['road', 'bg']);// 多个种类要素显示\r\n        AMapUI.load(['ui/misc/PointSimplifier', 'lib/utils', 'lib/$'], function (PointSimplifier, utils, $) {\r\n            if (!PointSimplifier.supportCanvas) {\r\n                alert('当前环境不支持 Canvas！');\r\n                return;\r\n            }\r\n            function MyCanvasRender(pointSimplifierIns, opts) {\r\n                // 直接调用父类的构造函数\r\n                MyCanvasRender.__super__.constructor.apply(this, arguments);\r\n            }\r\n\r\n            // 继承自默认的Canvas引擎（http://webapi.amap.com/ui/1.0/ui/misc/PointSimplifier/render/canvas.js）\r\n            utils.inherit(MyCanvasRender, PointSimplifier.Render.Canvas);\r\n\r\n            utils.extend(MyCanvasRender.prototype, {\r\n                renderNormalPoints: function (zoom, activePoints, shadowPoints) {\r\n                    // 先按默认逻辑处理shadowPoints\r\n                    MyCanvasRender.__super__.renderNormalPoints.call(this, zoom, null, shadowPoints);\r\n\r\n                    var pointStyle = this.getOption('pointStyle'),\r\n                        getPointsGroupKey = this.getOption('getPointsGroupKey'),\r\n                        pointStyleGroup = this.getOption('pointStyleGroup'),\r\n                        pointSimplifierIns = this.getPointSimplifierInstance(),\r\n                        groups = {};\r\n\r\n                    // 按key分组\r\n                    for (var i = 0, len = activePoints.length; i < len; i++) {\r\n\r\n                        var point = activePoints[i],\r\n                            dataIndex = point.idx,\r\n                            dataItem = pointSimplifierIns.getDataItemByIndex(dataIndex);\r\n\r\n                        var key = getPointsGroupKey.call(this, dataItem, dataIndex);\r\n\r\n                        if (!groups[key]) {\r\n                            groups[key] = [];\r\n                        }\r\n\r\n                        groups[key].push(activePoints[i]);\r\n                    }\r\n\r\n                    // 分组绘制\r\n                    for (var k in groups) {\r\n\r\n                        // 继承pointStyle中的默认属性\r\n                        var styleOptions = utils.extend({}, pointStyle, pointStyleGroup[k]);\r\n\r\n                        // 调用父类的绘制函数\r\n                        this.drawPointsWithStyleOptions(groups[k], styleOptions);\r\n                    }\r\n                }\r\n            });\r\n\r\n            var pointSimplifierIns = new PointSimplifier({\r\n                map: map, // 所属的地图实例\r\n\r\n                getPosition: function (item) {\r\n\r\n                    if (!item) {\r\n                        return null;\r\n                    }\r\n\r\n                    // 返回经纬度\r\n                    return [parseFloat(item.lng), parseFloat(item.lat)];\r\n                },\r\n                getHoverTitle: function (dataItem) {\r\n                    return dataItem.content;\r\n                },\r\n                autoSetFitView: false,\r\n                // 赋值为 MyCanvasRender\r\n                renderConstructor: MyCanvasRender,\r\n                renderOptions: {\r\n                    // 点的样式\r\n                    pointStyle: {\r\n                        width: 5,\r\n                        height: 5,\r\n                        fillStyle: '#d939bd'\r\n                    },\r\n                    // 鼠标hover时的title信息\r\n                    hoverTitleStyle: {\r\n                        position: 'top'\r\n                    },\r\n                    getPointsGroupKey: function (dataItem) {\r\n                        // 这里直接按索引取余，仅作示意\r\n                        return 'g' + dataItem.type;\r\n                    },\r\n                    // 分组配置\r\n                    pointStyleGroup: {\r\n                        'g0': {\r\n                            fillStyle: colorMap[0].color\r\n                        },\r\n                        'g1': {\r\n                            fillStyle: colorMap[1].color\r\n                        },\r\n                        'g2': {\r\n                            fillStyle: colorMap[2].color\r\n                        },\r\n                        'g3': {\r\n                            fillStyle: colorMap[3].color\r\n                        },\r\n                        'g4': {\r\n                            fillStyle: colorMap[4].color\r\n                        },\r\n                        'g5': {\r\n                            fillStyle: colorMap[5].color\r\n                        },\r\n                        'g6': {\r\n                            fillStyle: colorMap[6].color\r\n                        },\r\n                        'g7': {\r\n                            fillStyle: colorMap[7].color\r\n                        },\r\n                        'g8': {\r\n                            fillStyle: colorMap[8].color\r\n                        },\r\n                        'g9': {\r\n                            fillStyle: colorMap[9].color\r\n                        },\r\n                        'g10': {\r\n                            fillStyle: colorMap[10].color\r\n                        },\r\n                        'g11': {\r\n                            fillStyle: colorMap[11].color\r\n                        },\r\n                        'g12': {\r\n                            fillStyle: colorMap[12].color\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n            pointSimplifierIns.on('pointClick', function (e, record) {\r\n                console.log(e.type, record.data.recitime);\r\n            });\r\n\r\n            // 绘制左上legendType\r\n            var legendType = echarts.init(document.getElementById(\"legendType\"));\r\n            // 绘制左上legendPhone\r\n            var legendPhone = echarts.init(document.getElementById(\"legendPhone\"));\r\n            // 绘制下方时间线\r\n            var areaStack = echarts.init(document.getElementById(\"area-stack\"));\r\n\r\n            // 初始化数据\r\n            visService.getData('data/First-day.json', {}).then(\r\n                function (data) {\r\n                    // 初始化时间\r\n                    $scope.timeRange = '当前时间：' + $filter('date')(data.areas[data.areas.length - 1].stime, 'yyyy年M月d日')\r\n                        + $filter('date')(data.areas[data.areas.length - 1].stime, ' HH:mm ')\r\n                        + \"至\" + $filter('date')(data.areas[data.areas.length - 1].etime, ' HH:mm');\r\n\r\n                    // 初始化地图数据\r\n                    pointSimplifierIns.setData(data.maps);\r\n\r\n                    // 初始化legendType数据\r\n                    legendType.setOption({\r\n                        grid: {\r\n                            left: 5,\r\n                            right: 30,\r\n                            top: 10,\r\n                            bottom: 0,\r\n                            containLabel: true\r\n                        },\r\n                        xAxis: {\r\n                            show: false\r\n                        },\r\n                        yAxis: {\r\n                            type: 'category',\r\n                            boundaryGap: false,\r\n                            axisLabel: {\r\n                                textStyle: {\r\n                                    color: function () {\r\n                                        return (colorMap[0]).color\r\n                                    }\r\n                                }\r\n                            },\r\n                            data: colorMap.map(function (d) {\r\n                                return d.name;\r\n                            })\r\n                        },\r\n                        series: [\r\n                            {\r\n                                type: 'bar',\r\n                                barMaxWidth: 20,\r\n                                itemStyle: {\r\n                                    normal: {\r\n                                        color: function (params) {\r\n                                            return (colorMap[params.dataIndex]).color\r\n                                        }\r\n                                    }\r\n                                },\r\n                                label: {\r\n                                    normal: {\r\n                                        show: true,\r\n                                        position: 'right'\r\n                                    }\r\n                                },\r\n                                data: data.bars\r\n                            }\r\n                        ]\r\n                    });\r\n\r\n                    // 初始化legendPhone数据\r\n                    legendPhone.setOption({\r\n                        tooltip: {\r\n                            trigger: 'item',\r\n                            formatter: \"{c} ({d}%)\"\r\n                        },\r\n                        series: [\r\n                            {\r\n                                type: 'pie',\r\n                                radius: '55%',\r\n                                center: ['50%', '60%'],\r\n                                data: data.phone,\r\n                                itemStyle: {\r\n                                    emphasis: {\r\n                                        shadowBlur: 10,\r\n                                        shadowOffsetX: 0,\r\n                                        shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n                                    }\r\n                                }\r\n                            }\r\n                        ]\r\n                    });\r\n\r\n                    // 初始化areaStack数据\r\n                    $scope.areas = data.areas;\r\n                    areaStack.setOption({\r\n                        tooltip: {\r\n                            trigger: 'axis',\r\n                            axisPointer: {\r\n                                animation: false\r\n                            }\r\n                        },\r\n                        grid: {// 设置图与边缘的距离\r\n                            left: 0,\r\n                            right: 35,\r\n                            bottom: 5,\r\n                            containLabel: true\r\n                        },\r\n                        dataZoom: [{\r\n                            show: false,\r\n                            realtime: true,\r\n                            start: 0,\r\n                            end: 100\r\n                        }, {\r\n                            type: 'inside'\r\n                        }],\r\n                        xAxis: {\r\n                            type: 'category',\r\n                            boundaryGap: false,\r\n                            nameLocation: 'middle',\r\n                            axisLine: {\r\n                                lineStyle: {\r\n                                    color: '#aaaaaa'\r\n                                }\r\n                            },\r\n                            axisLabel: {\r\n                                textStyle: {\r\n                                    color: '#aaaaaa'\r\n                                }\r\n                            },\r\n                            axisTick: {\r\n                                lineStyle: {\r\n                                    color: '#aaaaaa'\r\n                                }\r\n                            },\r\n                            data: $scope.areas.map(function (item) {\r\n                                return $filter('date')(item.etime, 'd日HH:mm');\r\n                            })\r\n                        },\r\n                        yAxis: {\r\n                            show: false\r\n                        },\r\n                        series: [{\r\n                            name: 'num',\r\n                            type: 'line',\r\n                            lineStyle: {\r\n                                normal: {\r\n                                    width: 1\r\n                                }\r\n                            },\r\n                            areaStyle: {\r\n                                normal: {\r\n                                    color: '#aaaaaa'\r\n                                }\r\n                            },\r\n                            symbolSize: 3,\r\n                            label: {\r\n                                normal: {\r\n                                    show: true,\r\n                                    position: 'top'\r\n                                }\r\n                            },\r\n                            data: $scope.areas.map(function (item) {\r\n                                return item.num;\r\n                            })\r\n                        }]\r\n                    });\r\n\r\n                    legendPhone.on('click', function (params) {\r\n                        if (params.componentType === 'series') {\r\n                            if (params.seriesType === 'pie') {\r\n                                var para = {\r\n                                    startTime: ($scope.viewTime) / 1000,\r\n                                    endTime: ($scope.viewTime + 1800000) / 1000,\r\n                                    type: $scope.types.indexOf($scope.selectedType) - 1,\r\n                                    phone: params.name\r\n                                };\r\n                                visService.getData('./api/content.action', para).then(\r\n                                    function (data) {\r\n                                        $scope.records = data;\r\n                                        $scope.show = true;\r\n                                    },\r\n                                    function (error) {\r\n                                        $scope.error = error;\r\n                                    });\r\n                            }\r\n                        }\r\n                    });\r\n                    legendType.on('click', function (params) {\r\n                        if (params.componentType === 'series') {\r\n                            if (params.seriesType === 'bar') {\r\n                                var type = -1;\r\n                                colorMap.map(function (d, i) {\r\n                                    if (d.name === params.name) type = i;\r\n                                });\r\n\r\n                                var para = {\r\n                                    startTime: ($scope.viewTime) / 1000,\r\n                                    endTime: ($scope.viewTime + 1800000) / 1000,\r\n                                    type: type\r\n                                };\r\n                                visService.getData('./api/content.action', para).then(\r\n                                    function (data) {\r\n                                        $scope.records = data;\r\n                                        $scope.show = true;\r\n                                    },\r\n                                    function (error) {\r\n                                        $scope.error = error;\r\n                                    });\r\n                            }\r\n                        }\r\n                    });\r\n                    areaStack.on('click', function (params) {\r\n                        if (params.componentType === 'series') {\r\n                            if (params.seriesType === 'line') {\r\n                                if (params.dataType === 'edge') {\r\n                                    // 点击到了 graph 的 edge（边）上\r\n                                }\r\n                                else {\r\n                                    // 点击到了 graph 的 node（节点）上\r\n                                    var time = new Date(\"2017-02-\" + params.name.substring(0, 2) + \" \" + params.name.substring(3, 8) + \":00\");\r\n\r\n                                    // 重置content数据\r\n                                    $scope.viewTime = time.getTime() - 1800000;\r\n                                    $scope.show = false;\r\n                                    $scope.records = [];\r\n\r\n                                    var para = {\r\n                                        startTime: (time.getTime() - 1800000) / 1000,\r\n                                        endTime: (time.getTime()) / 1000,\r\n                                        type: $scope.types.indexOf($scope.selectedType) - 1\r\n                                    };\r\n                                    visService.getData('./api/position.action', para).then(\r\n                                        function (data) {\r\n                                            // 更新地图数据\r\n                                            pointSimplifierIns.setData(data.maps);\r\n\r\n                                            // 更新时间\r\n                                            $scope.timeRange = '当前时间：' + $filter('date')(data.area.stime, 'yyyy年M月d日')\r\n                                                + $filter('date')(data.area.stime, ' HH:mm ')\r\n                                                + \"至\" + $filter('date')(data.area.etime, ' HH:mm');\r\n\r\n                                            // 更新左上legendType数据\r\n                                            legendType.setOption({\r\n                                                series: [{\r\n                                                    data: data.bars\r\n                                                }]\r\n                                            });\r\n                                            // 更新左上legendPhone数据\r\n                                            legendPhone.setOption({\r\n                                                series: [\r\n                                                    {\r\n                                                        data: data.phone\r\n                                                    }\r\n                                                ]\r\n                                            });\r\n                                        },\r\n                                        function (error) {\r\n                                            $scope.error = error;\r\n                                        });\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n                },\r\n                function (error) {\r\n                    $scope.error = error;\r\n                });\r\n\r\n            // 开始按钮点击事件\r\n            $scope.start = function () {\r\n                $scope.intervalEvent = $interval(function () {\r\n                    // 自定义时间\r\n                    if (parseInt(localStorage.get('startTime')) !== (new Date($scope.currentTime).valueOf()) / 1000) {\r\n                        localStorage.set('startTime', (new Date($scope.currentTime).valueOf()) / 1000);\r\n                        // 清除下方时间线数据\r\n                        $scope.areas = [];\r\n                        areaStack.setOption({\r\n                            xAxis: {\r\n                                data: $scope.areas.map(function (item) {\r\n                                    return $filter('date')(item.etime, 'd日HH:mm');\r\n                                })\r\n                            },\r\n                            series: [{\r\n                                data: $scope.areas.map(function (item) {\r\n                                    return item.num;\r\n                                })\r\n                            }]\r\n                        });\r\n                    }\r\n\r\n                    var para = {\r\n                        startTime: parseInt(localStorage.get('startTime')),\r\n                        endTime: parseInt(localStorage.get('startTime')) + 1800,\r\n                        type: $scope.types.indexOf($scope.selectedType) - 1\r\n                    };\r\n                    visService.getData('./api/position.action', para).then(\r\n                        function (data) {\r\n                            // 更新地图数据\r\n                            pointSimplifierIns.setData(data.maps);\r\n\r\n                            // 更新时间\r\n                            $scope.timeRange = '当前时间：' + $filter('date')(data.area.stime, 'yyyy年M月d日')\r\n                                + $filter('date')(data.area.stime, 'HH:mm')\r\n                                + \"至\" + $filter('date')(data.area.etime, 'HH:mm');\r\n\r\n                            // 更新左上legendType数据\r\n                            legendType.setOption({\r\n                                series: [{\r\n                                    data: data.bars\r\n                                }]\r\n                            });\r\n                            // 更新左上legendPhone数据\r\n                            legendPhone.setOption({\r\n                                series: [\r\n                                    {\r\n                                        data: data.phone\r\n                                    }\r\n                                ]\r\n                            });\r\n\r\n                            // 更新下方时间线数据\r\n                            $scope.areas.push(data.area);\r\n                            // 保留最近一天的数据\r\n                            if ($scope.areas.length > 48) $scope.areas.shift();\r\n\r\n                            areaStack.setOption({\r\n                                xAxis: {\r\n                                    data: $scope.areas.map(function (item) {\r\n                                        return $filter('date')(item.etime, 'd日HH:mm');\r\n                                    })\r\n                                },\r\n                                series: [{\r\n                                    data: $scope.areas.map(function (item) {\r\n                                        return item.num;\r\n                                    })\r\n                                }]\r\n                            });\r\n                        },\r\n                        function (error) {\r\n                            $scope.error = error;\r\n                        });\r\n\r\n                    // 重置content数据\r\n                    $scope.viewTime = parseInt(localStorage.get('startTime') * 1000);\r\n                    $scope.show = false;\r\n                    $scope.records = [];\r\n\r\n                    localStorage.set('startTime', parseInt(localStorage.get('startTime')) + 1800);\r\n                    $scope.currentTime = $filter('date')(localStorage.get('startTime') + '000', 'yyyy-MM-dd HH:mm:ss');\r\n\r\n                }, 10000);\r\n            };\r\n\r\n            $scope.flag = '';\r\n            $scope.stop = function (flag) {\r\n                if (flag === 'Pause') {\r\n                    $interval.cancel($scope.intervalEvent);\r\n                    $scope.flag = 'Start';\r\n                } else {\r\n                    $scope.start(localStorage.get('startTime'));\r\n                    $scope.flag = 'Pause';\r\n\r\n                    // 重置content数据\r\n                    $scope.show = false;\r\n                    $scope.records = [];\r\n                }\r\n            };\r\n        });\r\n    }]);\nangular.module('chinavis')\r\n    .controller('analysisController', ['$scope', 'colorMap', 'visService', '$interval', '$filter', function ($scope, colorMap, visService, $interval, $filter) {\r\n        $scope.months = [\r\n            {\r\n                \"name\": \"二月\",\r\n                \"url\": \"data/M2-30min.json\"\r\n            },\r\n            {\r\n                \"name\": \"三月\",\r\n                \"url\": \"data/M3-30min.json\"\r\n            },\r\n            {\r\n                \"name\": \"四月\",\r\n                \"url\": \"data/M4-30min.json\"\r\n            }\r\n        ];\r\n        $scope.currentMonth = \"二月\";\r\n\r\n        // 初始展示二月份数据\r\n        visService.getData($scope.months[0].url, {}).then(\r\n            function (data) {\r\n                $scope.data0 = data;\r\n            },\r\n            function (error) {\r\n                $scope.error = error;\r\n            });\r\n\r\n        $scope.show = function (index) {\r\n            visService.getData($scope.months[index].url, {}).then(\r\n                function (data) {\r\n                    $scope.currentMonth = data.name;\r\n                    if (index === 0) {\r\n                        $scope.data0 = data;\r\n                        $scope.data1 = null;\r\n                        $scope.data2 = null;\r\n                    } else if (index === 1) {\r\n                        $scope.data0 = null;\r\n                        $scope.data1 = data;\r\n                        $scope.data2 = null;\r\n                    } else if (index === 2) {\r\n                        $scope.data0 = null;\r\n                        $scope.data1 = null;\r\n                        $scope.data2 = data;\r\n                    }\r\n                },\r\n                function (error) {\r\n                    $scope.error = error;\r\n                });\r\n        }\r\n    }]);\nangular.module('chinavis')\r\n    .directive('areaChart', ['$filter', 'colorMap', function ($filter, colorMap) {\r\n        return {\r\n            restrict: 'AE',\r\n            scope: {\r\n                data: '='\r\n            },\r\n            template: '<div></div>',\r\n            link: function (scope, element) {\r\n                var chart = element.find('div')[0];\r\n                chart.style.height = '249px';\r\n                chart.style.width = '100%';\r\n\r\n                var Chart = echarts.init(chart);\r\n                Chart.setOption({\r\n                    title: {\r\n                        text: scope.data.name,\r\n                        textStyle: {\r\n                            color: '#aaaaaa',\r\n                            fontSize: 15\r\n                        },\r\n                        top: 15,\r\n                        left: 40\r\n                    },\r\n                    tooltip: {\r\n                        trigger: 'axis',\r\n                        axisPointer: {\r\n                            type: 'cross',\r\n                            lineStyle: {\r\n                                type: 'dashed',\r\n                                width: 1\r\n                            },\r\n                            label: {\r\n                                backgroundColor: '#6a7985'\r\n                            }\r\n                        },\r\n                        position: {\r\n                            right: 10,\r\n                            top: 10\r\n                        }\r\n                    },\r\n                    grid: {\r\n                        left: '1%',\r\n                        right: '2%',\r\n                        bottom: '1%',\r\n                        containLabel: true\r\n                    },// 设置图与边缘的距离\r\n                    dataZoom: [{\r\n                        show: false,\r\n                        realtime: true,\r\n                        start: 0,\r\n                        end: 50\r\n                    }, {\r\n                        type: 'inside'\r\n                    }],\r\n                    color: colorMap.map(function (item) {\r\n                        return item.color\r\n                    }),// 改变legend的颜色\r\n                    legend: {\r\n                        top: 15,\r\n                        data: colorMap.map(function (item) {\r\n                            var obj = {};\r\n                            obj.name = item.name;\r\n                            obj.textStyle = {color: item.color};\r\n                            return obj;\r\n                        })\r\n                    },\r\n                    xAxis: {\r\n                        type: 'category',\r\n                        boundaryGap: false,\r\n                        axisLine: {\r\n                            onZero: true,\r\n                            lineStyle: {\r\n                                color: '#aaaaaa'\r\n                            }\r\n                        },\r\n                        axisLabel: {\r\n                            textStyle: {\r\n                                color: '#aaaaaa'\r\n                            }\r\n                        },\r\n                        axisTick: {\r\n                            lineStyle: {\r\n                                color: '#aaaaaa'\r\n                            }\r\n                        },\r\n                        data: scope.data.value.map(function (item) {\r\n                            return $filter('date')(item.time, 'M月d日H时mm分');\r\n                        })\r\n                    },\r\n                    yAxis: {\r\n                        type: 'value',\r\n                        splitLine: {\r\n                            show: false\r\n                        },// 去除网格线\r\n                        splitArea: {\r\n                            show: false\r\n                        },// 保留网格区域\r\n                        axisLine: {\r\n                            lineStyle: {\r\n                                color: '#aaaaaa'\r\n                            }\r\n                        },\r\n                        axisLabel: {\r\n                            textStyle: {\r\n                                color: '#aaaaaa'\r\n                            }\r\n                        },\r\n                        axisTick: {\r\n                            lineStyle: {\r\n                                color: '#aaaaaa'\r\n                            }\r\n                        }\r\n                    },\r\n                    series: [\r\n                        {\r\n                            name: colorMap[0].name,\r\n                            type: 'line',\r\n                            stack: '总量',\r\n                            lineStyle: {\r\n                                normal: {\r\n                                    opacity: 0\r\n                                }\r\n                            },\r\n                            areaStyle: {\r\n                                normal: {\r\n                                    color: colorMap[0].color\r\n                                }\r\n                            },\r\n                            smooth: true,\r\n                            smoothMonotone: 'x',\r\n                            symbolSize: 0,\r\n                            showSymbol: false,\r\n                            hoverAnimation: false,\r\n                            data: scope.data.value.map(function (item) {\r\n                                return item.g0 || 0;\r\n                            })\r\n                        }, {\r\n                            name: colorMap[1].name,\r\n                            type: 'line',\r\n                            stack: '总量',\r\n                            lineStyle: {\r\n                                normal: {\r\n                                    opacity: 0\r\n                                }\r\n                            },\r\n                            areaStyle: {\r\n                                normal: {\r\n                                    color: colorMap[1].color\r\n                                }\r\n                            },\r\n                            symbolSize: 3,\r\n                            hoverAnimation: false,\r\n                            data: scope.data.value.map(function (item) {\r\n                                return item.g1 || 0;\r\n                            })\r\n                        }, {\r\n                            name: colorMap[2].name,\r\n                            type: 'line',\r\n                            stack: '总量',\r\n                            lineStyle: {\r\n                                normal: {\r\n                                    opacity: 0\r\n                                }\r\n                            },\r\n                            areaStyle: {\r\n                                normal: {\r\n                                    color: colorMap[2].color\r\n                                }\r\n                            },\r\n                            symbolSize: 3,\r\n                            hoverAnimation: false,\r\n                            data: scope.data.value.map(function (item) {\r\n                                return item.g1 || 0;\r\n                            })\r\n                        }, {\r\n                            name: colorMap[3].name,\r\n                            type: 'line',\r\n                            stack: '总量',\r\n                            lineStyle: {\r\n                                normal: {\r\n                                    opacity: 0\r\n                                }\r\n                            },\r\n                            areaStyle: {\r\n                                normal: {\r\n                                    color: colorMap[3].color\r\n                                }\r\n                            },\r\n                            symbolSize: 3,\r\n                            hoverAnimation: false,\r\n                            data: scope.data.value.map(function (item) {\r\n                                return item.g3 || 0;\r\n                            })\r\n                        }, {\r\n                            name: colorMap[4].name,\r\n                            type: 'line',\r\n                            stack: '总量',\r\n                            lineStyle: {\r\n                                normal: {\r\n                                    opacity: 0\r\n                                }\r\n                            },\r\n                            areaStyle: {\r\n                                normal: {\r\n                                    color: colorMap[4].color\r\n                                }\r\n                            },\r\n                            symbolSize: 3,\r\n                            hoverAnimation: false,\r\n                            data: scope.data.value.map(function (item) {\r\n                                return item.g4 || 0;\r\n                            })\r\n                        }, {\r\n                            name: colorMap[5].name,\r\n                            type: 'line',\r\n                            stack: '总量',\r\n                            lineStyle: {\r\n                                normal: {\r\n                                    opacity: 0\r\n                                }\r\n                            },\r\n                            areaStyle: {\r\n                                normal: {\r\n                                    color: colorMap[5].color\r\n                                }\r\n                            },\r\n                            symbolSize: 3,\r\n                            hoverAnimation: false,\r\n                            data: scope.data.value.map(function (item) {\r\n                                return item.g5 || 0;\r\n                            })\r\n                        }, {\r\n                            name: colorMap[6].name,\r\n                            type: 'line',\r\n                            stack: '总量',\r\n                            lineStyle: {\r\n                                normal: {\r\n                                    opacity: 0\r\n                                }\r\n                            },\r\n                            areaStyle: {\r\n                                normal: {\r\n                                    color: colorMap[6].color\r\n                                }\r\n                            },\r\n                            symbolSize: 3,\r\n                            hoverAnimation: false,\r\n                            data: scope.data.value.map(function (item) {\r\n                                return item.g6 || 0;\r\n                            })\r\n                        }, {\r\n                            name: colorMap[7].name,\r\n                            type: 'line',\r\n                            stack: '总量',\r\n                            lineStyle: {\r\n                                normal: {\r\n                                    opacity: 0\r\n                                }\r\n                            },\r\n                            areaStyle: {\r\n                                normal: {\r\n                                    color: colorMap[7].color\r\n                                }\r\n                            },\r\n                            symbolSize: 3,\r\n                            hoverAnimation: false,\r\n                            data: scope.data.value.map(function (item) {\r\n                                return item.g7 || 0;\r\n                            })\r\n                        }, {\r\n                            name: colorMap[8].name,\r\n                            type: 'line',\r\n                            stack: '总量',\r\n                            lineStyle: {\r\n                                normal: {\r\n                                    opacity: 0\r\n                                }\r\n                            },\r\n                            areaStyle: {\r\n                                normal: {\r\n                                    color: colorMap[8].color\r\n                                }\r\n                            },\r\n                            symbolSize: 3,\r\n                            hoverAnimation: false,\r\n                            data: scope.data.value.map(function (item) {\r\n                                return item.g8 || 0;\r\n                            })\r\n                        }, {\r\n                            name: colorMap[9].name,\r\n                            type: 'line',\r\n                            stack: '总量',\r\n                            lineStyle: {\r\n                                normal: {\r\n                                    opacity: 0\r\n                                }\r\n                            },\r\n                            areaStyle: {\r\n                                normal: {\r\n                                    color: colorMap[9].color\r\n                                }\r\n                            },\r\n                            symbolSize: 3,\r\n                            hoverAnimation: false,\r\n                            data: scope.data.value.map(function (item) {\r\n                                return item.g9 || 0;\r\n                            })\r\n                        }, {\r\n                            name: colorMap[10].name,\r\n                            type: 'line',\r\n                            stack: '总量',\r\n                            lineStyle: {\r\n                                normal: {\r\n                                    opacity: 0\r\n                                }\r\n                            },\r\n                            areaStyle: {\r\n                                normal: {\r\n                                    color: colorMap[10].color\r\n                                }\r\n                            },\r\n                            symbolSize: 3,\r\n                            hoverAnimation: false,\r\n                            data: scope.data.value.map(function (item) {\r\n                                return item.g10 || 0;\r\n                            })\r\n                        }, {\r\n                            name: colorMap[11].name,\r\n                            type: 'line',\r\n                            stack: '总量',\r\n                            lineStyle: {\r\n                                normal: {\r\n                                    opacity: 0\r\n                                }\r\n                            },\r\n                            areaStyle: {\r\n                                normal: {\r\n                                    color: colorMap[11].color\r\n                                }\r\n                            },\r\n                            symbolSize: 3,\r\n                            hoverAnimation: false,\r\n                            data: scope.data.value.map(function (item) {\r\n                                return item.g11 || 0;\r\n                            })\r\n                        }, {\r\n                            name: colorMap[12].name,\r\n                            type: 'line',\r\n                            stack: '总量',\r\n                            lineStyle: {\r\n                                normal: {\r\n                                    opacity: 0\r\n                                }\r\n                            },\r\n                            areaStyle: {\r\n                                normal: {\r\n                                    color: colorMap[12].color\r\n                                }\r\n                            },\r\n                            symbolSize: 3,\r\n                            hoverAnimation: false,\r\n                            data: scope.data.value.map(function (item) {\r\n                                return item.g12 || 0;\r\n                            })\r\n                        }]\r\n                });\r\n            }\r\n        }\r\n    }]);\nangular.module('chinavis')\r\n    .directive('barChart', ['$filter', 'colorMap', function ($filter, colorMap) {\r\n        return {\r\n            restrict: 'AE',\r\n            scope: {\r\n                data: '=',\r\n                type: '='\r\n            },\r\n            template: '<div></div>',\r\n            link: function (scope, element) {\r\n                var title = ['各时间段伪基站活跃情况', '各类短信数量对比'];\r\n\r\n                var chart = element.find('div')[0];\r\n                chart.style.height = '230px';\r\n                chart.style.width = '100%';\r\n\r\n                var Chart = echarts.init(chart);\r\n                Chart.setOption({\r\n                    title: {\r\n                        text: title[scope.type],\r\n                        textStyle: {\r\n                            color: '#aaaaaa',\r\n                            fontSize: 15\r\n                        },\r\n                        top: 15,\r\n                        left: 40\r\n                    },\r\n                    tooltip: {\r\n                        trigger: 'axis',\r\n                        axisPointer: {// 坐标轴指示器，坐标轴触发有效\r\n                            type: 'shadow'// 默认为直线，可选为：'line' | 'shadow'\r\n                        }\r\n                    },\r\n                    grid: {\r\n                        left: '1%',\r\n                        right: '2%',\r\n                        bottom: '1%',\r\n                        containLabel: true\r\n                    },// 设置图与边缘的距离\r\n                    xAxis: [\r\n                        {\r\n                            type: 'category',\r\n                            axisLine: {\r\n                                onZero: true,\r\n                                lineStyle: {\r\n                                    color: '#aaaaaa'\r\n                                }\r\n                            },\r\n                            axisLabel: {\r\n                                show: true,\r\n                                interval: 0,\r\n                                textStyle: {\r\n                                    color: '#aaaaaa'\r\n                                }\r\n                            },\r\n                            axisTick: {\r\n                                lineStyle: {\r\n                                    color: '#aaaaaa'\r\n                                }\r\n                            },\r\n                            data: scope.data.map(function (item) {\r\n                                if (scope.type === 0) return $filter('date')(item.time, 'HH:mm');\r\n                                else if (scope.type === 1) return colorMap[item.type].name;\r\n                            })\r\n                        }\r\n                    ],\r\n                    yAxis: [\r\n                        {\r\n                            type: 'value',\r\n                            splitLine: {\r\n                                show: false\r\n                            },// 去除网格线\r\n                            splitArea: {\r\n                                show: false\r\n                            },// 保留网格区域\r\n                            axisLine: {\r\n                                lineStyle: {\r\n                                    color: '#aaaaaa'\r\n                                }\r\n                            },\r\n                            axisLabel: {\r\n                                textStyle: {\r\n                                    color: '#aaaaaa'\r\n                                }\r\n                            },\r\n                            axisTick: {\r\n                                lineStyle: {\r\n                                    color: '#aaaaaa'\r\n                                }\r\n                            }\r\n                        }\r\n                    ],\r\n                    series: [\r\n                        {\r\n                            name: '总量',\r\n                            type: 'bar',\r\n                            barWidth: '60%',\r\n                            itemStyle: {\r\n                                normal: {\r\n                                    color: function (params) {\r\n                                        if (scope.type === 0) return '#3398DB';\r\n                                        else if (scope.type === 1) return (colorMap[params.dataIndex]).color\r\n                                    }\r\n                                }\r\n                            },\r\n                            data: scope.data.map(function (item) {\r\n                                return item.num\r\n                            })\r\n                        }\r\n                    ]\r\n                });\r\n\r\n            }\r\n        }\r\n    }]);\nangular.module('chinavis')\r\n    .directive('pieChart', ['$filter', 'colorMap', function ($filter, colorMap) {\r\n        return {\r\n            restrict: 'AE',\r\n            scope: {\r\n                data: '='\r\n            },\r\n            template: '<div></div>',\r\n            link: function (scope, element) {\r\n                var pieData = [];\r\n                // 修改key并添加颜色信息\r\n                scope.data.second.map(function (item) {\r\n                    var obj = {};\r\n                    obj.name = colorMap[item.type].name;\r\n                    obj.value = item.num;\r\n                    obj.itemStyle = {\"normal\": {\"color\": colorMap[item.type].color}};\r\n                    pieData.push(obj);\r\n                });\r\n\r\n                var chart = element.find('div')[0];\r\n                chart.style.height = '490px';\r\n                chart.style.width = '100%';\r\n\r\n                var Chart = echarts.init(chart);\r\n                Chart.setOption({\r\n                    title: {\r\n                        text: '各类短信所占比例',\r\n                        x: 'center',\r\n                        bottom: 30,\r\n                        textStyle: {\r\n                            color: '#aaaaaa',\r\n                            fontSize: 15\r\n                        }\r\n                    },\r\n                    grid: {\r\n                        left: '2%',\r\n                        right: '2%',\r\n                        top: '2%',\r\n                        containLabel: true\r\n                    },// 设置图与边缘的距离\r\n                    tooltip: {\r\n                        trigger: 'item',\r\n                        formatter: \"{b}: {c} ({d}%)\"\r\n                    },\r\n                    series: [\r\n                        {\r\n                            type: 'pie',\r\n                            selectedMode: 'single',\r\n                            radius: [0, '30%'],\r\n\r\n                            label: {\r\n                                normal: {\r\n                                    position: 'inner'\r\n                                }\r\n                            },\r\n                            labelLine: {\r\n                                normal: {\r\n                                    show: false\r\n                                }\r\n                            },\r\n                            data: scope.data.first\r\n                        },\r\n                        {\r\n                            name: '访问来源',\r\n                            type: 'pie',\r\n                            radius: ['40%', '55%'],\r\n\r\n                            data: pieData\r\n                        }\r\n                    ]\r\n                });\r\n\r\n            }\r\n        }\r\n    }]);"]}